import React from 'react';
import ReactCharts from 'echarts-for-react';
import './style.less';

var symbols = [
	'path://M93.9045782,83.3662094 C93.9045782,83.3662094 95.7547972,40.4970701 69.01' +
		'68983,6.69322917 C69.0168983,6.69322917 63.458508,-0.321804615 58.099989,1.22195' +
		'364 C45.181636,4.94365616 45.0639666,2.44199595 32.4631543,17.2241507 C22.350478' +
		'3,29.0874448 10.9829512,44.288987 1,65.4544651 C2.40030739,67.8136409 3.77446888' +
		',70.1663751 4.85687048,72.096557 C8.53337789,78.6526521 11.6528296,78.1495729 17' +
		'.3271238,81.7248802 C23.001418,85.3001876 22.3166103,83.4694664 29.6440779,87.14' +
		'1381 C36.9715456,90.8132955 37.032826,89.8552233 45.1485725,96.0624684 C53.26431' +
		'91,102.269714 56.8775322,105.609267 58.6983892,106.600201 C60.5192462,107.591134' +
		' 70.1632756,109.979401 75.1003763,109.968659 C79.2153398,109.959706 84.7792932,1' +
		'09.29408 89.7988586,108.446024 C94.5796118,80.9694261 93.9045782,83.3662094 93.9' +
		'045782,83.3662094 Z',
	'path://M68.3978288,79.3798737 C63.9392274,78.28361 53.6845367,83.0064042 51.0714' +
		'043,83.3123454 C48.458272,83.6182867 41.088088,85.8543436 36.7171757,83.7025672 ' +
		'C32.3462633,81.5507907 31.9334954,79.7202827 28.0109292,73.9176232 C24.0883631,6' +
		'8.1149637 22.1265839,62.959478 19.3987482,55.6454189 C16.6709125,48.3313598 12.2' +
		'134961,37.3154667 9.99471091,33.0670199 C7.77592571,28.8185731 5.37852631,16.824' +
		'9499 4.46858623,12.3076771 C3.94102931,9.68869305 2.29242228,4.56066603 1,0 C1,0' +
		' 3.66818991,4.20270013 4.64338821,5.94171277 C8.31989562,12.4978079 11.4393474,1' +
		'1.9947287 17.1136415,15.570036 C22.7879357,19.1453434 22.103128,17.3146222 29.43' +
		'05957,20.9865368 C36.7580633,24.6584513 36.8193437,23.7003791 44.9350903,29.9076' +
		'242 C53.0508368,36.1148693 56.66405,39.454423 58.484907,40.4453566 C60.3057639,4' +
		'1.4362901 69.9497933,43.8245564 74.886894,43.8138145 C78.0665299,43.8068965 82.1' +
		'113092,43.4079012 86.1015793,42.8356221 L86.1015793,58.3137254 C81.3147488,74.96' +
		'9998 75.8032662,76.8847944 74.1998633,77.8957964 C72.2289391,79.1385335 68.62685' +
		'42,79.4361856 68.3978288,79.3798737 Z',
	'path://M87.2558813,80.4042166 C85.6947828,81.1297548 84.2731084,82.310862 83.659' +
		'8399,84.5722342 C82.2871344,89.6339621 86.1408491,93.5210372 83.6403413,94.91168' +
		'2 C81.1398335,96.3023268 74.7372543,96.5159711 65.9792374,95.7138265 C57.2212205' +
		',94.911682 37.4877994,104.208733 23.3263145,104.600023 C9.16482969,104.991313 6.' +
		'20181373,104.093694 6.20181373,104.093694 C6.20181373,104.093694 4.67233905,101.' +
		'796821 2.15467242,87.5702984 C-0.362994217,73.3437755 0.544083322,46.9950874 11.' +
		'9351989,16.76715 C14.1876655,10.7899111 16.5636121,5.21395277 19.0235582,-4.2632' +
		'5641e-14 C20.3404189,4.73053731 22.1395375,10.2719383 22.6951591,13.0302458 C23.' +
		'6050992,17.5475187 26.0024986,29.5411419 28.2212838,33.7895887 C30.440069,38.038' +
		'0355 34.8974855,49.0539285 37.6253211,56.3679876 C40.3531568,63.6820468 42.31493' +
		'6,68.8375325 46.2375021,74.640192 C50.1600683,80.4428514 50.5728363,82.2733595 5' +
		'4.9437486,84.4251359 C59.3146609,86.5769123 66.6848449,84.3408554 69.2979772,84.' +
		'0349142 C71.9111096,83.728973 82.1658003,79.0061787 86.6244017,80.1024425 C86.85' +
		'34272,80.1587544 87.0634718,80.2609671 87.2558813,80.4042166 Z',
	'path://M70.2797394,123.68376 C58.0162468,144.75398 58.3486811,144.069595 54.4283' +
		'226,153.473957 C52.1836564,158.858581 51.0319921,165.855509 50.201308,170.968883' +
		' C48.1271954,170.466279 47.8686065,169.839392 45.8989259,170.210588 C42.7065641,' +
		'170.812205 32.1809443,171.76175 26.7529463,170.657143 C21.3249483,169.552536 13.' +
		'0049304,156.085203 9.44451322,151.805946 C5.88409602,147.526689 3.36668447,144.3' +
		'21903 3.97719773,141.16369 C4.58771098,138.005478 5.96982999,134.339891 9.308540' +
		'23,129.712704 C12.6472505,125.085518 12.2327883,124.94318 13.7748979,121.774435 ' +
		'C15.3170075,118.605691 18.7578438,112.732655 16.9530618,106.503349 C15.1482797,1' +
		'00.274044 11.1135765,96.5727995 7.93297414,91.7467603 C4.75237179,86.9207211 3.1' +
		'0936432,84.3738272 1.9217667,79.136923 C0.734169074,73.9000189 1.11575814,70.753' +
		'7427 1.00217428,64.2619833 C0.888590418,57.7702238 5.23917996,47.8271145 10.7709' +
		'324,34.9904382 C16.3026849,22.1537618 11.9439042,22.0660946 16.9972939,12.907607' +
		'1 C22.0506836,3.74911965 27.4180671,2.36507303 33.3309809,1.08403541 C39.2438946' +
		',-0.197002201 53.3550511,13.5453863 58.2555395,16.5978502 C63.1560278,19.6503141' +
		' 79.1380416,48.3668159 81.6663747,55.6645662 C84.1947078,62.9623164 86.1878861,7' +
		'4.0911252 88.5518502,79.514988 C88.9067356,80.3292346 89.3130515,81.7060511 89.7' +
		'489653,83.4752306 C83.3229705,96.0304354 80.3742037,106.340203 70.2797394,123.68' +
		'376 Z',
	'path://M47.7573799,36.6510331 C48.2324663,41.6913517 47.3119161,71.2061734 47.66' +
		'52274,73.7830425 C48.0185388,76.3599116 46.4223579,83.7716292 45.3029015,87.0980' +
		'532 C44.1834452,90.4244772 41.8754582,91.546618 39.081186,92.783822 C36.2869138,' +
		'94.0210259 34.2342131,90.3587268 32.4228782,91.0480105 C30.6115432,91.7372942 28' +
		'.9831438,90.5888533 24.5757624,90.4058479 C20.1683809,90.2228426 16.9438006,87.6' +
		'42138 7.72657946,87.7785702 C4.26708767,87.8297772 2.28951451,87.5771776 1,87.27' +
		'34223 C1.83223397,82.1495445 2.98430425,75.0822246 5.24729545,69.653642 C9.16765' +
		'402,60.2492793 8.83521966,60.9336648 21.0987123,39.863445 C31.1931766,22.5198882' +
		' 34.1419434,12.2101201 40.5278974,1.83977246e-06 C42.9908409,10.1313968 47.35679' +
		'43,32.4011126 47.7573799,36.6510331 Z'
];

const getOption = (LungData) => {
	const { title } = LungData;
	const data = LungData.data.map((item) => item.count);
	if (data.length === 0) {
		return {
			title: [
				{
					text: title,
					textAlign: 'left',
					textStyle: {
						fontFamily: 'SourceHanSansSC-Medium',
						fontSize: 20,
						lineHeight: 29,
						fontWeight: 'normal',
						color: 'rgba(201,209,222,0.90)'
					}
				}
			]
		};
	}

	return {
		visualMap: {
			top: '20%',
			right: 0,
			min: Math.min(...data),
			max: Math.max(...data) === 0 ? 1000 : Math.max(...data),
			inRange: {
				color: ['#55A4FF', '#154FB9']
			},
			text: ['High', 'Low'],
			itemWidth: 10,
			itemHeight: 180
		},
		title: [
			{
				text: title,
				textAlign: 'left',
				textStyle: {
					fontFamily: 'SourceHanSansSC-Medium',
					fontSize: 20,
					lineHeight: 29,
					fontWeight: 'normal',
					color: 'rgba(201,209,222,0.90)'
				}
			}
		],
		grid: {
			left: -100,
			right: '10%',
			bottom: '30%'
		},
		label: {
			normal: {
				show: true,
				position: 'bottom',
				textStyle: {
					color: '#fff',
					fontSize: 15
				}
			}
		},
		xAxis: {
			data: ['a'],
			show: false
		},
		yAxis: {
			show: false
		},
		tooltip: {
			trigger: 'item',
			position: function(p) {
				//其中p为当前鼠标的位置
				return [p[0], p[1] + 25];
			}
		},
		series: [
			{
				label: {
					position: ['46%', '110%'],
					show: true,
					fontFamily: 'SourceHanSansSC-Medium',
					fontSize: 14,
					fontHeight: 26,
					color: '#FFFFFF',
					formatter: function(params) {
						return (params.data.value / 10000.0).toFixed(1) + '万';
					}
				},
				type: 'pictorialBar',
				overAnimation: true,
				data: [
					{
						name: '左肺上叶',
						value: data[0],
						symbol: symbols[0],
						symbolSize: [93, 109],
						symbolOffset: [8, -70],
						label: {
							normal: {
								offset: [8, -140]
							}
						}
					},
					{
						name: '左肺中叶',
						value: data[1],
						symbol: symbols[1],
						symbolSize: [85, 85],
						symbolOffset: [0, -25],
						label: {
							normal: {
								offset: [8, -70]
							}
						}
					},
					{
						name: '左肺下叶',
						value: data[2],
						symbol: symbols[2],
						symbolSize: [86, 105],
						symbolOffset: [-20, 0],
						label: {
							normal: {
								offset: [-40, -40]
							}
						}
					},
					{
						name: '右肺上叶',
						value: data[3],
						symbol: symbols[3],
						symbolSize: [89, 170],
						symbolOffset: [120, -5],
						label: {
							normal: {
								offset: [120, -100]
							}
						}
					},
					{
						name: '右肺下叶',
						value: data[4],
						symbol: symbols[4],
						symbolSize: [46, 93],
						symbolOffset: [150, 5],
						label: {
							normal: {
								offset: [151, -35]
							}
						}
					}
				]
			}
		]
	};
};

export default class LungChart extends React.Component<any, any> {
	render() {
		return (
			<div className="lung-chart">
				<ReactCharts
					option={getOption(this.props.data)}
					className="chart"
					style={{
						width: '100%',
						height: '100%'
					}}
				/>
			</div>
		);
	}
}
